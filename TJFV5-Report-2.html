<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="TJFV5">

<title>TJFV5-Report-2</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="TJFV5-Report-2_files/libs/clipboard/clipboard.min.js"></script>
<script src="TJFV5-Report-2_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="TJFV5-Report-2_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="TJFV5-Report-2_files/libs/quarto-html/popper.min.js"></script>
<script src="TJFV5-Report-2_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="TJFV5-Report-2_files/libs/quarto-html/anchor.min.js"></script>
<link href="TJFV5-Report-2_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="TJFV5-Report-2_files/libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="TJFV5-Report-2_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="TJFV5-Report-2_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="TJFV5-Report-2_files/libs/bootstrap/bootstrap-81267100e462c21b3d6c0d5bf76a3417.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">TJFV5-Report-2</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>TJFV5 </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Singapore’s rapid economic development, from the nation’s independence in 1965 to the present, is oftentimes lauded as one of the biggest success stories of development from third world to first. Singapore’s education system has been apportioned much credit in shaping this trajectory, where Singapore’s education reforms has sustained its international credibility as a high-quality public education system. Concurrently, it has progressed greatly in gender equality, where Singapore was ranked first in Asia-Pacific for low gender inequality in the UN Human Development Report’s Gender Inequality Index (GII) published in March 2024.</p>
<p>This study thus aims to explore the relationships between Singapore’s education expenditure, GDP growth and gender equality. It focuses on the years 2000 to 2020 in particular, as I aim to understand how gender equality has evolved after Singapore’s establishment as a first world country.</p>
<p>Utilising the World Bank Data360 API and datasets made available by the Department of Statistics Singapore (Singstat), this study undertakes data wrangling and processing methods in RScript, producing interactive data visualisation outputs using RShiny.</p>
</section>
<section id="set-up-and-loading-packages" class="level2">
<h2 class="anchored" data-anchor-id="set-up-and-loading-packages">Set up and loading packages</h2>
<p>The following packages are needed for the data collection and wrangling process.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Set up </span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"~/Downloads/TJFV5-SOCS0100-Assignment-2"</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co">#load packages required</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">"pacman"</span>)) {</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">install.packages</span>(<span class="st">"pacman"</span>)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: pacman</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(pacman)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  kableExtra,</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  flextable,</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  skimr,</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  ggplot2,</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  dplyr,</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  purrr,</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  tidyverse,</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  gridExtra,</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>  httr,</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>  jsonlite,</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>  janitor</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="world-bank-data360-api" class="level2">
<h2 class="anchored" data-anchor-id="world-bank-data360-api">World Bank Data360 API</h2>
<p>To meet this study’s aims, I first leveraged on World Bank Data360 APIs. As World Bank Data360 APIs are public, data can be retrieved without authentication. World Bank Data360 provides access to several databases across the World Bank Group’s data portal.</p>
<p>I created the retrieve_data( ) function to automate the data retrieval process, as well as filter the data for the indicator and year.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" href=""><strong>Accessing API</strong></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false" href=""><strong>Function to retrieve and filter data</strong></a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co">#World Bank Data360 API</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">"https://data360api.worldbank.org/data360/data"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">#function to retrieve and filter data from API</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>retrieve_data <span class="ot">&lt;-</span> <span class="cf">function</span>(query_list){</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  resp <span class="ot">&lt;-</span> <span class="fu">GET</span>(url, <span class="at">query =</span> query_list, <span class="fu">accept</span>(<span class="st">"application/json"</span>))</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stop_for_status</span>(resp)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  raw_json <span class="ot">&lt;-</span> <span class="fu">content</span>(resp, <span class="at">as =</span> <span class="st">"text"</span>,<span class="at">encoding =</span> <span class="st">"UTF-8"</span>)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  parsed <span class="ot">&lt;-</span> <span class="fu">fromJSON</span>(raw_json, <span class="at">flatten =</span> <span class="cn">FALSE</span>)</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  df<span class="ot">&lt;-</span><span class="fu">tibble</span>(parsed<span class="sc">$</span>value)</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">&lt;-</span> <span class="fu">subset</span>(df, <span class="at">select =</span> <span class="fu">c</span>(<span class="st">"TIME_PERIOD"</span>,<span class="st">"OBS_VALUE"</span>))<span class="sc">%&gt;%</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="st">"Year"</span> <span class="ot">=</span> <span class="st">"TIME_PERIOD"</span>)<span class="sc">%&gt;%</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(Year))</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(df)</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<p>The following indicators were used to this study, with their respective rationales:</p>
<ol type="1">
<li><strong>Government Expenditure on Education (% of GDP):</strong> this provides a general understanding of the level of government spending on education.</li>
<li><strong>GDP per capita (annual % growth):</strong> This shows us the trajectory of Singapore’s economic growth. Per capita statistics was used to understand economic growth adjusted per individual.</li>
<li><strong>Women in Business and Law (WBL) index</strong>: This index evaluates how laws, regulations and government policies affect the economic opportunity that women have. Created by the World Bank Group, it measures women’s economic opportunity across 10 topics, taking the unweighted average of the indicators scaled to 100.</li>
<li><strong>Total population:</strong> this is a basic population statistic that provides the basis for later data wrangling processes.</li>
</ol>
<p>The corresponding indicator IDs and filters for each indicator were stored into query objects, and the data was retrieved using the function created above. Thereafter, the four data frames produced were merged into one data frame.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true" href=""><strong>Queries</strong></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false" href=""><strong>Retrieved data</strong></a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">#list of indicators required</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>q1 <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">database_ID =</span> <span class="st">"WB_WDI"</span>,</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">indicator =</span> <span class="st">"WB_WDI_SE_XPD_TOTL_GD_ZS"</span>, <span class="co">#government expenditure on education (% of GDP)</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">REF_AREA =</span> <span class="st">"SGP"</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>q2 <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">database_ID =</span> <span class="st">"WB_WDI"</span>,</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">indicator =</span> <span class="st">"WB_WDI_NY_GDP_PCAP_KN"</span>, <span class="co">#GDP per capita (annual % growth)</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">REF_AREA =</span> <span class="st">"SGP"</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>q3 <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">database_ID =</span> <span class="st">"WB_WBL"</span>,</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">indicator =</span> <span class="st">"WB_WBL_SG_LAW_INDX"</span>, <span class="co">#WBL Index</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">REF_AREA =</span> <span class="st">"SGP"</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>q4 <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">database_ID =</span> <span class="st">"WB_WDI"</span>,</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">indicator =</span> <span class="st">"WB_WDI_SP_POP_TOTL"</span>, <span class="co">#Total population</span></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">REF_AREA =</span> <span class="st">"SGP"</span></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">#retrieving data from API</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>ee_df <span class="ot">&lt;-</span> <span class="fu">retrieve_data</span>(q1)<span class="sc">%&gt;%</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">"Education Expenditure (% of GDP)"</span> <span class="ot">=</span> <span class="st">"OBS_VALUE"</span>)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>gdp_df <span class="ot">&lt;-</span> <span class="fu">retrieve_data</span>(q2)<span class="sc">%&gt;%</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">"GDP per capita (constant LCU)"</span> <span class="ot">=</span> <span class="st">"OBS_VALUE"</span>)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>women_df <span class="ot">&lt;-</span> <span class="fu">retrieve_data</span>(q3)<span class="sc">%&gt;%</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">"WBL Index Score"</span> <span class="ot">=</span> <span class="st">"OBS_VALUE"</span>)</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>population_df <span class="ot">&lt;-</span> <span class="fu">retrieve_data</span>(q4)<span class="sc">%&gt;%</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">"Total Population"</span> <span class="ot">=</span> <span class="st">"OBS_VALUE"</span>)</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>data360 <span class="ot">&lt;-</span> <span class="fu">merge</span>(ee_df,gdp_df,<span class="at">by=</span><span class="st">"Year"</span>)</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>data360 <span class="ot">&lt;-</span> <span class="fu">merge</span>(data360,women_df,<span class="at">by=</span><span class="st">"Year"</span>)</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>data360 <span class="ot">&lt;-</span> <span class="fu">merge</span>(data360,population_df,<span class="at">by=</span><span class="st">"Year"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<p>Through the use of the str( ) function, I gleaned the structure of the variables, which allowed me to identify that the observations were not in a consistent double vector format.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">#data wrangling</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(data360) <span class="co">#understanding the structure of the dataset currently</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   38 obs. of  5 variables:
 $ Year                            : chr  "1971" "1972" "1973" "1974" ...
 $ Education Expenditure (% of GDP): chr  "3.10976" "2.86827" "2.48882" "2.38852" ...
 $ GDP per capita (constant LCU)   : chr  "10617.587202" "11810.583535" "12821.021432" "13380.796484" ...
 $ WBL Index Score                 : chr  "51.875" "51.875" "51.875" "51.875" ...
 $ Total Population                : chr  "2112900" "2152400" "2193000" "2229800" ...</code></pre>
</div>
</div>
<p>A new variable, “Education Spending per Capita”, was created to understand the increase in education spending. While education expenditure as a percentage of GDP remained largely similar, the increase in education spending would increase with GDP. The new variable thus provides a better visualisation of that increase in education expenditure.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>data360 <span class="ot">&lt;-</span> data360 <span class="sc">%&gt;%</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_all</span>(as.numeric) <span class="sc">%&gt;%</span> <span class="co">#this changes the column vectors from character to double</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">"Education Spending per Capita"</span><span class="ot">=</span> (<span class="st">`</span><span class="at">Education Expenditure (% of GDP)</span><span class="st">`</span><span class="sc">/</span><span class="dv">100</span>)<span class="sc">*</span><span class="st">`</span><span class="at">GDP per capita (constant LCU)</span><span class="st">`</span>)</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="fu">view</span>(data360) <span class="co">#view dataset</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="singstat-indicators" class="level2">
<h2 class="anchored" data-anchor-id="singstat-indicators">Singstat Indicators</h2>
<p>To delve deeper into Singapore’s education statistics specific to gender, I further leveraged on data by the Singstat, which provided me with yearly indicators on education and literacy.</p>
<p>The raw .csv file can be found in “<code>Singstat-indicators-education-literacy.csv"</code> .</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co">#store singstat indicator into data frame</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>singstat_indicators <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"singstat-raw.csv"</span>)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(singstat_indicators)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   48 obs. of  63 variables:
 $ X   : chr  "Theme: Population" "Subject: Education, Language Spoken and Literacy" "Topic: Literacy Rate and Proficiency Indicators" "Table Title: Indicators On Education And Literacy, Annual" ...
 $ X.1 : num  NA NA NA NA NA ...
 $ X.2 : num  NA NA NA NA NA NA NA NA NA 2020 ...
 $ X.3 : num  NA NA NA NA NA ...
 $ X.4 : num  NA NA NA NA NA ...
 $ X.5 : num  NA NA NA NA NA ...
 $ X.6 : num  NA NA NA NA NA ...
 $ X.7 : num  NA NA NA NA NA ...
 $ X.8 : num  NA NA NA NA NA ...
 $ X.9 : num  NA NA NA NA NA ...
 $ X.10: num  NA NA NA NA NA ...
 $ X.11: num  NA NA NA NA NA ...
 $ X.12: num  NA NA NA NA NA NA NA NA NA 2010 ...
 $ X.13: chr  "" "" "" "" ...
 $ X.14: chr  "" "" "" "" ...
 $ X.15: chr  "" "" "" "" ...
 $ X.16: chr  "" "" "" "" ...
 $ X.17: chr  "" "" "" "" ...
 $ X.18: chr  "" "" "" "" ...
 $ X.19: chr  "" "" "" "" ...
 $ X.20: chr  "" "" "" "" ...
 $ X.21: chr  "" "" "" "" ...
 $ X.22: num  NA NA NA NA NA NA NA NA NA 2000 ...
 $ X.23: chr  "" "" "" "" ...
 $ X.24: chr  "" "" "" "" ...
 $ X.25: chr  "" "" "" "" ...
 $ X.26: chr  "" "" "" "" ...
 $ X.27: chr  "" "" "" "" ...
 $ X.28: chr  "" "" "" "" ...
 $ X.29: chr  "" "" "" "" ...
 $ X.30: chr  "" "" "" "" ...
 $ X.31: chr  "" "" "" "" ...
 $ X.32: num  NA NA NA NA NA NA NA NA NA 1990 ...
 $ X.33: chr  "" "" "" "" ...
 $ X.34: chr  "" "" "" "" ...
 $ X.35: chr  "" "" "" "" ...
 $ X.36: chr  "" "" "" "" ...
 $ X.37: chr  "" "" "" "" ...
 $ X.38: chr  "" "" "" "" ...
 $ X.39: chr  "" "" "" "" ...
 $ X.40: chr  "" "" "" "" ...
 $ X.41: chr  "" "" "" "" ...
 $ X.42: num  NA NA NA NA NA NA NA NA NA 1980 ...
 $ X.43: chr  "" "" "" "" ...
 $ X.44: chr  "" "" "" "" ...
 $ X.45: chr  "" "" "" "" ...
 $ X.46: chr  "" "" "" "" ...
 $ X.47: chr  "" "" "" "" ...
 $ X.48: chr  "" "" "" "" ...
 $ X.49: chr  "" "" "" "" ...
 $ X.50: chr  "" "" "" "" ...
 $ X.51: chr  "" "" "" "" ...
 $ X.52: num  NA NA NA NA NA NA NA NA NA 1970 ...
 $ X.53: chr  "" "" "" "" ...
 $ X.54: chr  "" "" "" "" ...
 $ X.55: chr  "" "" "" "" ...
 $ X.56: chr  "" "" "" "" ...
 $ X.57: chr  "" "" "" "" ...
 $ X.58: chr  "" "" "" "" ...
 $ X.59: chr  "" "" "" "" ...
 $ X.60: chr  "" "" "" "" ...
 $ X.61: chr  "" "" "" "" ...
 $ X.62: chr  "" "" "" "" ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">view</span>(singstat_indicators)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>After storing the csv into a data frame object for data wrangling, a glimpse at the data frame structure reveals the following issues that required data wrangling:</p>
<ol type="1">
<li>Only rows 10 to 16 possessed meaningful data on literacy rates, while the others outlined metadata information.</li>
<li>There were inconsistencies in vector types. While some observations were double vectors, others were character vectors.</li>
<li>Data was mapped horizontally, where column headers marked each year, while the first column was the names of each indicator.</li>
</ol>
<p>Given the above, the following data wrangling operations had to be undertaken to smoothen the process for data visualisation. Firstly, the relevant rows 10-16 had to be sifted out, while data observations had to be manipulated into double vectors in order to be generated into data visualisations. The following code stores the .csv file into a dataframe object, then illustrates these steps.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co">#data wrangling process for singstat indicators</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>singstat_indicators <span class="ot">&lt;-</span> singstat_indicators<span class="sc">%&gt;%</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">10</span><span class="sc">:</span><span class="dv">16</span>)<span class="sc">%&gt;%</span> <span class="co">#select relevant rows</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.character),<span class="sc">~</span><span class="fu">na_if</span>(.,<span class="st">"na"</span>)))<span class="sc">%&gt;%</span> <span class="co">#converting "na" observations into NA</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">63</span>,as.double))<span class="co">#converting all meaningful observations into double vector</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The following steps were then taken to tidy the orientation and the names of variables within the dataset. Notably, the t( ) function changes data frame into a matrix when flipping the dataframe’s rows to columns. Hence, I tidied this up with the as.data.frame( ) function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Tidying names</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>singstat_indicators <span class="ot">&lt;-</span> <span class="fu">t</span>(singstat_indicators)<span class="sc">%&gt;%</span> <span class="co">#</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>(singstat_indicators)<span class="sc">%&gt;%</span> <span class="co">#this changes the matrix back into a data frame</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  janitor<span class="sc">::</span><span class="fu">row_to_names</span>(<span class="at">row_number =</span> <span class="dv">1</span>)<span class="sc">%&gt;%</span> <span class="co">#shifts the first row into names</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Year=</span><span class="st">`</span><span class="at">Data Series</span><span class="st">`</span>)</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="co">#Tidying row names</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(singstat_indicators) <span class="ot">&lt;-</span> <span class="cn">NULL</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Next, the following rows that indicated the variables for Literacy Rates (15 and over) were used. This was specifically identified, as it shows the literacy rates after secondary education and above.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Retaining relevant rows</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>singstat_indicators <span class="ot">&lt;-</span> <span class="fu">subset</span>(singstat_indicators,<span class="at">select=</span><span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>)) <span class="co">#selecting rows</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>singstat_indicators <span class="ot">&lt;-</span> singstat_indicators<span class="sc">%&gt;%</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">Year</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">as.integer</span>(<span class="st">`</span><span class="at">Year</span><span class="st">`</span>)) <span class="co">#changes year into integer</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="fu">view</span>(singstat_indicators)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="final-data-set" class="level2">
<h2 class="anchored" data-anchor-id="final-data-set">Final data set</h2>
<p>For the final output, I combined the wrangled data from the Data360 API and the Singstat data. As they were both data frames, I used the merge( ) to merge the two data by year. The years 2000 to 2020 was then selected.</p>
<p>The wrangled dataset represents data from the years 2000 to 2020, across these 9 variables: year, education expenditure (% of GDP), GDP per capita, total population, education expenditure per capita, WBL Index Scores, Literacy Rates (15 years and over), Literacy Rates (15 years and over) (Males) and Literacy Rates (15 years and over) (Female). The rationale for each have been elucidated above.</p>
<p>This was then written into a .csv file for input into the <code>"app.R"</code> file.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Merging dataframes</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>merged_df <span class="ot">&lt;-</span> <span class="fu">merge</span>(data360,singstat_indicators,<span class="at">by=</span><span class="st">"Year"</span>)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>merged_df <span class="ot">&lt;-</span> merged_df <span class="sc">%&gt;%</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">15</span><span class="sc">:</span><span class="dv">35</span>) <span class="co">#Years 2000 to 2020</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="fu">view</span>(merged_df)</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(merged_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   21 obs. of  9 variables:
 $ Year                                       : num  2000 2001 2002 2003 2004 ...
 $ Education Expenditure (% of GDP)           : num  3.32 3.54 3.88 3.98 3.65 ...
 $ GDP per capita (constant LCU)              : num  47968 46191 47567 50470 54796 ...
 $ WBL Index Score                            : num  66.2 66.2 66.2 68.8 68.8 ...
 $ Total Population                           : num  4027887 4138012 4175950 4114826 4166664 ...
 $ Education Spending per Capita              : num  1593 1636 1845 2010 2002 ...
 $ Literacy Rate (15 Years &amp; Over)            : chr  "  92.5" "  92.9" "  93.2" "  93.5" ...
 $   Literacy Rate (15 Years &amp; Over) - Males  : chr  "  96.6" "  96.7" "  96.8" "  97.0" ...
 $   Literacy Rate (15 Years &amp; Over) - Females: chr  "  88.6" "  89.2" "  89.7" "  90.2" ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Creating wrangling dataframe .csv file</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(merged_df,<span class="at">file =</span> <span class="st">"education-expenditure-and-gender-gap.csv"</span>,<span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="rshiny-dashboard-and-findings" class="level2">
<h2 class="anchored" data-anchor-id="rshiny-dashboard-and-findings">RShiny Dashboard and Findings</h2>
<p>Using the refined datasets encoded in .csv format, I developed the RShiny Dashboard <code>"app.R"</code> for data visualisation. The following packages were used.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">"pacman"</span>)) {</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">install.packages</span>(<span class="st">"pacman"</span>)</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(pacman)</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>  shiny,</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>  shinydashboard,</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>  ggplot2,</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>  dplyr,</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>  purrr,</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>  tidyverse,</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>  leaflet,</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>  plotly,</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>  tidyr</span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The dashboard breaks down the study into the following three sections.</p>
<section id="education-expenditure-per-capita-gdp-per-capita-and-literacy-rates" class="level4">
<h4 class="anchored" data-anchor-id="education-expenditure-per-capita-gdp-per-capita-and-literacy-rates"><em>1. Education Expenditure per capita, GDP per Capita and Literacy Rates</em></h4>
<p>To set the stage in understanding the impact of education spending, this first section explores the relationships between education expenditure per capita, GDP per capita and literacy rates for those aged 15 years and above.</p>
<p>To map the three variables against year, I merged a bubble chart alongside a line within a single graph. The position of the bubbles represents GDP per capita, while the size of the bubble denotes the literacy rates. The line denotes the education expenditure per capita. The years represented in the graph can be controlled using the slider, where the</p>
<p>With Singapore’s fast growing economy, the illustrated sustained increases in all variables is as expected. Large dips in GDP per capita and education expenditure per capita can be attributed to the 2009 Financial Crisis and the Covid-19 pandemic. Despite these dips, literacy rates continue to persist upwards. Notably, the ratio of education expenditure per capita and GDP per capita slowly decreases over time, meaning that education expenditure was not growing proportionately to GDP. Yet, literacy rates continue to gradually increase. This suggests that upfront education costs may have longer-term impacts on the population’s literacy rates as a whole.</p>
</section>
<section id="education-expenditure-per-capita-and-literacy-rates-by-gender" class="level4">
<h4 class="anchored" data-anchor-id="education-expenditure-per-capita-and-literacy-rates-by-gender"><em>2. Education Expenditure per capita and Literacy Rates by Gender</em></h4>
<p>This second section further explores the gender differences in education expenditure impacts. To meet these aims, two main data visualisations were used.</p>
<p>Firstly, I plotted education spending per capita alongside literacy rates by gender. Users can interact with the plot by selecting the gender. To supplement this, a second plot that provides a side-by-side comparison of the literacy rates of males and females by year was created.</p>
<p>This shows a positive relationship between education expenditure per capita and literacy rates. In particular, the large difference between men and women in terms of change in literacy rates was elucidated. While both sustained a steady increase in literacy rates, the rate at which female literacy rates increased was significantly faster than males.</p>
</section>
<section id="education-expenditure-per-capita-and-wbl-index" class="level4">
<h4 class="anchored" data-anchor-id="education-expenditure-per-capita-and-wbl-index"><em>3. Education Expenditure per capita and WBL Index</em></h4>
<p>The above sections illustrated that education expenditure has a long-term impact on literacy rates, and disproportionately benefits women over men, despite the gender literacy gap still existing.</p>
<p>To understand what this means for economic opportunity for women, this last section plots the WBL Index against education expenditure per capita, as well as GDP per capita for reference. A supplemental table output was created for the user to observe the exact data points for each year, and observe the consequent change in the gender literacy gap.</p>
<p>This section illustrates that education expenditure per capita was accompanied by a sustained increase in the WBL Index. Gender literacy gaps furthermore closed rapidly.</p>
</section>
<section id="conclusions" class="level3">
<h3 class="anchored" data-anchor-id="conclusions">Conclusions</h3>
<p>Education expenditure was shown to have a strong impact on literacy rates, particularly uplifting women’s literacy rates. This translated to a strong increase in economic opportunity for women.</p>
</section>
</section>
<section id="use-of-microsoft-copilot" class="level2">
<h2 class="anchored" data-anchor-id="use-of-microsoft-copilot">Use of Microsoft Copilot</h2>
<p>Microsoft Copilot was pivotal in helping to explain several code errors, allowing me to understand some nuances of RScript that were not taught in lecture. This was critical in helping me refine my code, further developing my repertoire in RScript.</p>
<p>In particular, Microsoft Copilot was helpful in refining my interactive plots for clarity. However, I approached this with some criticality, as its recommendations were oftentimes convoluted.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true" href=""><strong>Initial Code</strong></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false" href=""><strong>Microsoft Copilot suggestion</strong></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-3" role="tab" aria-controls="tabset-3-3" aria-selected="false" href=""><strong>Final output</strong></a></li></ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<p>In the following instance, I wanted to add an extra Y axis scale on the right for another variable, but was unsure of how to do so.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>output<span class="sc">$</span>plot1 <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>    df <span class="ot">&lt;-</span> dataset <span class="sc">%&gt;%</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(year <span class="sc">&gt;=</span> input<span class="sc">$</span>year[<span class="dv">1</span>],</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>             year <span class="sc">&lt;=</span> input<span class="sc">$</span>year[<span class="dv">2</span>])</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ggplot</span>(df)<span class="sc">+</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>year,<span class="at">y=</span>education_spending_per_capita),<span class="at">col=</span><span class="st">"#9d46db"</span>,<span class="at">size=</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>year,<span class="at">y=</span>gdp_per_capita_constant_lcu,<span class="at">size=</span>literacy_rate_15_years_over),</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>                       <span class="at">color=</span><span class="st">"#b84090"</span>,</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>                   <span class="at">alpha =</span> <span class="fl">0.7</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<p>The following suggested input by Microsoft Copilot was useful in showing me the functions required to create the additional axis. However, I found the code rather convoluted, where certain lines could be modified based on my dataset.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>output<span class="sc">$</span>plot1 <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">req</span>(input<span class="sc">$</span>year)                       <span class="co"># ensure slider exists</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># handle range slider or single value</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>  yr_min <span class="ot">&lt;-</span> <span class="cf">if</span> (<span class="fu">length</span>(input<span class="sc">$</span>year) <span class="sc">==</span> <span class="dv">1</span>) input<span class="sc">$</span>year <span class="cf">else</span> input<span class="sc">$</span>year[<span class="dv">1</span>]</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>  yr_max <span class="ot">&lt;-</span> <span class="cf">if</span> (<span class="fu">length</span>(input<span class="sc">$</span>year) <span class="sc">==</span> <span class="dv">1</span>) input<span class="sc">$</span>year <span class="cf">else</span> input<span class="sc">$</span>year[<span class="dv">2</span>]</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">&lt;-</span> dataset <span class="sc">%&gt;%</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(year <span class="sc">&gt;=</span> yr_min, year <span class="sc">&lt;=</span> yr_max) <span class="sc">%&gt;%</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">gdp =</span> <span class="fu">as.numeric</span>(gdp_per_capita_constant_lcu),</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">edu =</span> <span class="fu">as.numeric</span>(education_spending_per_capita),</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">literacy =</span> <span class="fu">as.numeric</span>(literacy_rate_15_years_over)</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(gdp) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(edu))</span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">nrow</span>(df) <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">plot.new</span>(); <span class="fu">title</span>(<span class="at">main =</span> <span class="fu">paste</span>(<span class="st">"No data for years"</span>, yr_min, <span class="st">"to"</span>, yr_max)); <span class="fu">return</span>()</span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a>  <span class="co"># compute linear scale to map education (secondary) onto the primary (gdp) scale</span></span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a>  prim_min <span class="ot">&lt;-</span> <span class="fu">min</span>(df<span class="sc">$</span>gdp, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a>  prim_max <span class="ot">&lt;-</span> <span class="fu">max</span>(df<span class="sc">$</span>gdp, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a>  sec_min  <span class="ot">&lt;-</span> <span class="fu">min</span>(df<span class="sc">$</span>edu, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a>  sec_max  <span class="ot">&lt;-</span> <span class="fu">max</span>(df<span class="sc">$</span>edu, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true" tabindex="-1"></a>  <span class="co"># avoid division by zero if constant</span></span>
<span id="cb22-28"><a href="#cb22-28" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (sec_max <span class="sc">==</span> sec_min) {</span>
<span id="cb22-29"><a href="#cb22-29" aria-hidden="true" tabindex="-1"></a>    scale_factor <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb22-30"><a href="#cb22-30" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb22-31"><a href="#cb22-31" aria-hidden="true" tabindex="-1"></a>    <span class="co"># scale_factor maps secondary -&gt; primary when multiplied: edu * scale_factor ≈ gdp-scale</span></span>
<span id="cb22-32"><a href="#cb22-32" aria-hidden="true" tabindex="-1"></a>    scale_factor <span class="ot">&lt;-</span> (prim_max <span class="sc">-</span> prim_min) <span class="sc">/</span> (sec_max <span class="sc">-</span> sec_min)</span>
<span id="cb22-33"><a href="#cb22-33" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb22-34"><a href="#cb22-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-35"><a href="#cb22-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x =</span> year)) <span class="sc">+</span></span>
<span id="cb22-36"><a href="#cb22-36" aria-hidden="true" tabindex="-1"></a>    <span class="co"># education plotted on primary axis by scaling it to the GDP range</span></span>
<span id="cb22-37"><a href="#cb22-37" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> edu <span class="sc">*</span> scale_factor), <span class="at">color =</span> <span class="st">"#9d46db"</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb22-38"><a href="#cb22-38" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">y =</span> gdp, <span class="at">size =</span> literacy), <span class="at">color =</span> <span class="st">"#b84090"</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb22-39"><a href="#cb22-39" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(</span>
<span id="cb22-40"><a href="#cb22-40" aria-hidden="true" tabindex="-1"></a>      <span class="at">name =</span> <span class="st">"GDP per Capita"</span>,</span>
<span id="cb22-41"><a href="#cb22-41" aria-hidden="true" tabindex="-1"></a>      <span class="at">sec.axis =</span> <span class="fu">sec_axis</span>(<span class="sc">~</span> . <span class="sc">/</span> scale_factor, <span class="at">name =</span> <span class="st">"Education Spending per Capita"</span>)</span>
<span id="cb22-42"><a href="#cb22-42" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb22-43"><a href="#cb22-43" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_size</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">25</span>), <span class="at">name =</span> <span class="st">"Literacy Rates (15 Years and over)"</span>) <span class="sc">+</span></span>
<span id="cb22-44"><a href="#cb22-44" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb22-45"><a href="#cb22-45" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb22-46"><a href="#cb22-46" aria-hidden="true" tabindex="-1"></a>      <span class="at">axis.text.y.left =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">"#b84090"</span>),</span>
<span id="cb22-47"><a href="#cb22-47" aria-hidden="true" tabindex="-1"></a>      <span class="at">axis.title.y.left =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">"#b84090"</span>),</span>
<span id="cb22-48"><a href="#cb22-48" aria-hidden="true" tabindex="-1"></a>      <span class="at">axis.text.y.right =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">"#9d46db"</span>),</span>
<span id="cb22-49"><a href="#cb22-49" aria-hidden="true" tabindex="-1"></a>      <span class="at">axis.title.y.right =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">"#9d46db"</span>)</span>
<span id="cb22-50"><a href="#cb22-50" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb22-51"><a href="#cb22-51" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb22-52"><a href="#cb22-52" aria-hidden="true" tabindex="-1"></a>      <span class="at">title =</span> <span class="st">"Relationship between Education Spending per Capita, GDP per Capita and Literacy Rates"</span>,</span>
<span id="cb22-53"><a href="#cb22-53" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">"Year"</span></span>
<span id="cb22-54"><a href="#cb22-54" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb22-55"><a href="#cb22-55" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-3-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-3-tab">
<p>Integrating Microsoft Copilot’s suggestions with my own work, the following output was produced. This was further adopted in other plot outputs in the interactive dashboard as well.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>output<span class="sc">$</span>plot1 <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>    df <span class="ot">&lt;-</span> dataset <span class="sc">%&gt;%</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(year <span class="sc">&gt;=</span> input<span class="sc">$</span>year[<span class="dv">1</span>],</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>             year <span class="sc">&lt;=</span> input<span class="sc">$</span>year[<span class="dv">2</span>])</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ggplot</span>(df)<span class="sc">+</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>year,<span class="at">y=</span>education_spending_per_capita<span class="sc">*</span><span class="dv">37</span>),<span class="at">col=</span><span class="st">"#9d46db"</span>,<span class="at">size=</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>year,<span class="at">y=</span>gdp_per_capita_constant_lcu,<span class="at">size=</span>literacy_rate_15_years_over),</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>                       <span class="at">color=</span><span class="st">"#b84090"</span>,</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>                   <span class="at">alpha =</span> <span class="fl">0.7</span>)<span class="sc">+</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>      <span class="fu">scale_y_continuous</span>(<span class="at">name=</span><span class="st">"GDP per Capita"</span>, <span class="at">sec.axis=</span><span class="fu">sec_axis</span>(<span class="sc">~</span>.<span class="sc">/</span><span class="dv">37</span>,<span class="at">name=</span><span class="st">"Education Spending per Capita"</span>))<span class="sc">+</span></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme</span>(</span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.y.left=</span><span class="fu">element_text</span>(<span class="at">color=</span><span class="st">"#b84090"</span>),</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.y.right=</span><span class="fu">element_text</span>(<span class="at">color=</span><span class="st">"#9d46db"</span>)</span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>      )<span class="sc">+</span> </span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>      <span class="fu">scale_size</span>(<span class="at">range=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">25</span>),<span class="at">name=</span><span class="st">"Literacy Rates (15 Years and over)"</span>) <span class="sc">+</span></span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Relationship between Education Spending per Capita, GDP per Capita and Literacy Rates"</span>,</span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>           <span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> <span class="st">"GDP Per Capita"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<p>With Microsoft Copilot as a collaborative tool, I was able to bring the RShiny dashboard to life, creating a more immersive user experience.</p>
</section>
<section id="limitations" class="level2">
<h2 class="anchored" data-anchor-id="limitations">Limitations</h2>
<p>The study’s main weakness is that it does not investigate the correlation and causation between education expenditure, GDP per capita and gender equality. Hence, it cannot provide a fully elaborate understanding of how policy impacts economic growth and female economic opportunity. Nevertheless, the study supports current literature on the positive impacts that universal education expenditure has on gender equality.</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>